"use strict";var cognitoSyncClient={},cognitoTestApp={syncCallbacks:{onSuccess:function(a,b){console.log(a,b),console.log("data saved to the cloud and newRecords received")},onFailure:function(a){console.log("Error while synchronizing data to the cloud: "+a)},onConflict:function(a,b,c){for(var d=[],e=0;e<b.length;e++)d.push(b[e].resolveWithRemoteRecord());a.resolve(d,function(a){a||c(!0)})},onDatasetDeleted:function(a,b,c){return c(!0)},onDatasetMerged:function(a,b,c){return c(!1)}},testSetup:function(a,b){a&&$("#test").html(a),$("#test").focus(function(){$(this).data("initialText",$(this).html())}).blur(function(){$(this).data("initialText")!==$(this).html()&&(console.log("New data when content change."),b.put("MyKey",JSON.stringify($(this).html()),function(a){a||b.synchronize(cognitoTestApp.syncCallbacks)}))})}},loginFinished=function(a){if(a){var b=document.getElementById("oauth2-results"),c="";a.status.signed_in?(c="User granted access:",$("#startFlow").hide(),gapi.auth.setToken(a)):c="Access denied: "+a.error,b.innerHTML=c,AWS.config.region="us-east-1",AWS.config.credentials=new AWS.CognitoIdentityCredentials({IdentityPoolId:"us-east-1:2229d0aa-09c2-450d-90da-9cae70b8260f",Logins:{"accounts.google.com":a.id_token}}),AWS.config.credentials.get(function(a){a?console.log("credentials.get: ".red+a,a.stack):(console.log("Cognito Identity Id: "+AWS.config.credentials.identityId),cognitoSyncClient=new AWS.CognitoSyncManager,cognitoSyncClient.openOrCreateDataset("MYDataset",function(a,b){a||b.get("MyKey",function(a,c){a||cognitoTestApp.testSetup(c,b)})}))})}};jQuery(document).ready(function(a){a("#login").click(function(){gapi.auth.signIn({callback:loginFinished,approvalprompt:"force",clientid:"593494804152-2jt9r0j9c5qhi04das20f9am6tblh1rq.apps.googleusercontent.com",requestvisibleactions:"http://schema.org/AddAction",cookiepolicy:"single_host_origin"})})});